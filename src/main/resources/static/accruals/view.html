<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View Accruals</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
            integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
            crossorigin="anonymous"></script>
</head>
<body>
<header>
    <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container d-flex justify-content-center">
            <strong class="navbar-brand " style="font-size:3rem">View Accruals</strong>
        </div>
    </div>
</header>

<main role="main">
    <div class="album py-5 bg-light">
        <div class="container">
        <table class="table table-striped table-dark">
            <thead>
            <tr>
                <th>Id</th>
                <th>Accrual Type Id</th>
                <th>Sum</th>
                <th>Date</th>
                <th>Days</th>
                <th>Employee Id</th>
            </tr>
            </thead>
            <tbody id="table">

            </tbody>
        </table>
        <br/>
        <br/>
        <br/>
        </div>
    </div><!-- /.container -->
    </div>
</main>
<script>
        fetch('http://localhost:80/api/accrual',
            {
                method: 'GET'
            }
        ).then(response => response.json()
    ).then(result => {
            if (result.length == undefined) {
            alert(result.message)
        } else{
                for (i=0; i< result.length; i++) {
            var entity = result[i];
                $("#table").append(
                    "<tr>" +
                        "<th>" + entity.id +"</th>" +
                        "<th>" + entity.accrualType.id +"</th>" +
                        "<th>" + entity.sum +"</th>" +
                        "<th>" + entity.date +"</th>" +
                        "<th>" + entity.days +"</th>" +
                        "<th>" + entity.employee.id +"</th>" +
                    + "</tr>"
                )
            }}}).catch(s=>alert("Error executing SQL in database"))
</script>
</body>
</html>